<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IOSA / CAASL Executive Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
  <div class="brand">
    <div class="logo">✈</div>
    <div>
      <div class="title">CAASL / IOSA Readiness Dashboard</div>
      <div class="subtitle">Executive view • Auto-updates from latest uploaded Excel</div>
    </div>
  </div>

  <div class="actions">
    <div class="pill" id="lastUpdated">Loading…</div>

    <button class="btn" id="refreshBtn">Refresh</button>

    <!-- Search button (shown on small screens) -->
    <button class="iconBtn" id="searchToggle" aria-label="Search">
      <!-- simple magnifier -->
      <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
        <path fill="currentColor"
          d="M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12 6 6 0 010-12z" />
      </svg>
    </button>

    <input class="search" id="search" placeholder="Search missed / tasks…" />
  </div>
</header>


  <main class="wrap">
    <!-- KPI CARDS -->
    <section class="grid kpis">
      <div class="card kpi">
        <div class="kpiLabel">Completion progress</div>
        <div class="kpiValue" id="kpiScore">—</div>
        <!-- <div class="kpiHint">Weighted index (missed & due-soon impact)</div> -->
      </div>

      <div class="card kpi">
        <div class="kpiLabel">Total Planned Items</div>
        <div class="kpiValue" id="kpiTotal">—</div>
        <div class="kpiHint">All non-empty colored blocks</div>
      </div>

      <div class="card kpi">
        <div class="kpiLabel">Completed</div>
        <div class="kpiValue good" id="kpiCompleted">—</div>
        <div class="kpiHint">Green blocks</div>
      </div>

      <div class="card kpi">
        <div class="kpiLabel">Due Soon (14 days)</div>
        <div class="kpiValue warn" id="kpiDueSoon">—</div>
        <div class="kpiHint">Planned but not completed</div>
      </div>

      <div class="card kpi">
        <div class="kpiLabel">Missed Deadlines</div>
        <div class="kpiValue bad" id="kpiMissed">—</div>
        <div class="kpiHint">Red blocks in the past</div>
      </div>
    </section>

    <!-- MISSED DEADLINES + UPCOMING -->
    <section class="grid two">
      <div class="card">
        <div class="cardHead">
          <div>
            <h2>Deadlines</h2>
            <p class="muted">Switch between completed and missed deadlines.</p>
          </div>
        </div>
      
        <div class="tabs">
          <button class="tabBtn active" id="tabCompleted" type="button">Completed Deadlines</button>
          <button class="tabBtn" id="tabMissed" type="button">Missed Deadlines</button>
        </div>
      
        <div class="tableWrap">
          <table class="table" id="deadlinesTable">
            <thead id="deadlinesThead"></thead>
            <tbody></tbody>
          </table>
        </div>
      
        <div class="empty" id="deadlinesEmpty">No items found.</div>
      </div>


      <div class="card">
        <div class="cardHead">
          <div>
            <h2>Upcoming Critical (30 days)</h2>
            <p class="muted">Next scheduled items not yet completed.</p>
          </div>
        </div>
        <div class="list" id="upcomingList"></div>
        <div class="empty" id="upcomingEmpty">No upcoming items in the next 30 days.</div>
      </div>
    </section>

    <!-- AUDITS -->
    <section class="grid two">
      <div class="card audit audit-caal">
        <div class="cardHead">
          <div>
            <h2>CAASL Audit Readiness</h2>
          </div>
          <!-- <div class="badge" id="caaBadge" id="hidenone">—</div> -->
        </div>

        <div class="auditRow">
          <div>
            <div class="label">Audit Window</div>
            <div class="value" id="caaWindow">—</div>
          </div>
          <div>
            <div class="label">Countdown</div>
            <div class="value" id="caaCountdown">—</div>
          </div>
          <div>
            <div class="label" id="hidenone">Readiness</div>
            <!-- <div class="value" id="caaReady" id="hidenone">—</div> -->
          </div>
        </div>

        <div class="progress" id="hidenone">
          <div class="progressBar" id="caaBar" id="hidenone"></div>
        </div>
      </div>

      <div class="card audit audit-iosa">
        <div class="cardHead">
          <div>
            <h2>IOSA Audit Readiness</h2>
          </div>
          <!-- <div class="badge" id="iosaBadge">—</div> -->
        </div>

        <div class="auditRow">
          <div>
            <div class="label">Audit Window</div>
            <div class="value" id="iosaWindow">—</div>
          </div>
          <div>
            <div class="label">Countdown</div>
            <div class="value" id="iosaCountdown">—</div>
          </div>
          <div>
            <div class="label" id="hidenone">Readiness</div>
            <!-- <div class="value" id="iosaReady" id="hidenone">—</div> -->
          </div>
        </div>

        <div class="progress" id="hidenone">
          <div class="progressBar" id="iosaBar"></div>
        </div>
      </div>
    </section>

    <!-- TRAINING / STAFFING / INSPECTIONS -->
    <section class="grid three">
      <div class="card">
        <h2>Training & SOP</h2>
        <div class="mini" id="trainingPanel"></div>
      </div>

      <div class="card">
        <h2>Staffing & Leadership</h2>
        <div class="mini" id="staffingPanel"></div>
      </div>

      <div class="card">
        <h2>Inspections</h2>
        <div class="mini" id="inspectionsPanel"></div>
      </div>
    </section>

    <!-- WEEKLY HEATMAP -->
    <section class="card" style="display:none;">
      <div class="cardHead">
        <div>
          <h2>Weekly Activity Heatmap</h2>
          <!-- <p class="muted">Planned vs completed vs missed (last 28 weeks).</p> -->
        </div>
      </div>
      <div class="heatmap" id="heatmap"></div>
      <div class="heatLegend">
        <span><i class="dot done"></i>Completed</span>
        <span><i class="dot pend"></i>Pending</span>
        <span><i class="dot miss"></i>Missed</span>
      </div>
    </section>

  </main>

  <script src="app.js"></script>
  <!-- <footer class="footer">
  <div class="footerInner">
    <span class="footerDot">©</span>
    <span>2026 Sri Lankan IT Systems. All Rights Reserved.</span>
  </div>
</footer> -->
</body>
</html>
